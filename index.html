// =============================
// NORMALIZE COLUMN HEADERS
// =============================
function normalizeKey(k) {
    return k.trim()                      // remove trailing spaces
        .toLowerCase()
        .replace(/\uFEFF/g, "")
        .replace(/\s+/g, "")
        .replace(/\(/g, "")
        .replace(/\)/g, "")
        .replace(/\./g, "")
        .replace(/-/g, "")
        .replace(/\r/g, "")
        .replace(/\t/g, "");
}

const formatComma = d3.format(",.0f");
const formatOne   = d3.format(".1f");

const container = d3.select("#scatterplot");
const details   = d3.select("#info");

const WIDTH = 900, HEIGHT = 520;
const margin = { top: 30, right: 20, bottom: 60, left: 80 };
const innerW = WIDTH - margin.left - margin.right;
const innerH = HEIGHT - margin.top - margin.bottom;

const svg = container.append("svg")
    .attr("viewBox", `0 0 ${WIDTH} ${HEIGHT}`)
    .attr("preserveAspectRatio", "xMidYMid meet");

const g = svg.append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

const gx = g.append("g").attr("transform", `translate(0,${innerH})`);
const gy = g.append("g");

svg.append("text")
    .attr("text-anchor", "middle")
    .attr("x", margin.left + innerW / 2)
    .attr("y", HEIGHT - 12)
    .text("Retail Price (USD)");

svg.append("text")
    .attr("text-anchor", "middle")
    .attr("t
